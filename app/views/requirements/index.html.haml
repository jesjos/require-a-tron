%h1 
  Listing
  = @requirements_count
  requirements
%p Click a requirement to view or edit.

- @sections.each do |section|
  %h2
    = section.name
  %table.table.table-striped.table-bordered.clickableRows
    %tr
      %th Requirement id
      %th Short name
      %th Description
      %th Rationale
      %th Dependency
      %th Indentation
      / %th Originator
      / %th Fit criterion
      / %th Customer satisfaction
      / %th Customer dissatisfaction
      / %th Priority
      / %th Author
      %th
    - section.requirements.each do |requirement|
      %tr{data: {url: requirement_path(requirement)}}
        %td= requirement.identification
        %td= requirement.short_name
        %td= requirement.description
        %td= requirement.rationale
        %td= requirement.dependency ? link_to(requirement.dependency.identification, requirement.dependency) : ""
        %td= requirement.indentation
        / %td= requirement.originator
        / %td= requirement.fit_criterion
        / %td= requirement.customer_satisfaction
        / %td= requirement.customer_dissatisfaction
        / %td= requirement.priority
        / %td= requirement.author.email if requirement.author
        %td= link_to 'Destroy', requirement, :confirm => 'Are you sure?', :method => :delete

%h2 Unsectioned requirements
%table.table.table-striped.table-bordered.clickableRows
  %tr
    %th Requirement id
    %th Short name
    %th Description
    %th Rationale
    %th Dependency
    %th Indentation
    / %th Originator
    / %th Fit criterion
    / %th Customer satisfaction
    / %th Customer dissatisfaction
    / %th Priority
    / %th Author
    %th

  - @unsectioned_requirements.each do |requirement|
    %tr{data: {url: requirement_path(requirement)}}
      %td= requirement.identification
      %td= requirement.short_name
      %td= requirement.description
      %td= requirement.rationale
      %td= requirement.dependency ? link_to(requirement.dependency.identification, requirement.dependency) : ""
      %td= requirement.indentation
      / %td= requirement.originator
      / %td= requirement.fit_criterion
      / %td= requirement.customer_satisfaction
      / %td= requirement.customer_dissatisfaction
      / %td= requirement.priority
      / %td= requirement.author.email if requirement.author
      %td= link_to 'Destroy', requirement, :confirm => 'Are you sure?', :method => :delete


%br

= link_to 'New Requirement', new_requirement_path, class: "btn btn-primary"
